## 生命周期
组件的生命周期：
-   初始化
-   更新期
-   销毁期 
**生命周期图**
<image src="./5.1-1.png">

### 可以使用的钩子函数
-   初始化状态：钩子函数只能使用一次：
    -   getDefaultProps 初始化props，没有钩子函数，通过静态属性设置
    -   getInitialState 初始化state，没有钩子函数，通过在构造函数中给this.state赋值设置
    -   componentWillMount()   render 之前调用，一般用来通过ajax获取数据
    -   render() ;render方法是React最重要的步骤，在这个生命周期，react组件创建虚拟dom、进行diff算法、更新dom树，这个时候，不能修改state状态。render方法必须返回一个JSX元素。
    -   componentDidMount();componentDidMount钩子函数是在组件安装完毕。同样只调用一次。
在这个钩子函数内，我们可以能够访问this.refs，能够执行DOM操作。
我们一般会在这里创建定时器，执行swiper初始化等等DOM操作。
-   更新期
    -  componentWillReceiveProps();组件初始化时不调用，只有当外部注入的props属性发生变化时才会执行这个钩子函数。
    -  shouldComponentUpdate，组件更新判断，是React性能优化非常重要的一环。
shouldComponentUpdate在组件接受新的state或者props时调用。这个钩子函数通过返回boolean值觉得是否执行后面的生命周期。
React会在此对比前后两个props和state是否相同，如果相同则返回false阻止更新，因为相同的属性状态一定会生成相同的dom树，这样就不需要创造新的dom树和旧的dom树进行diff算法对比，节省大量性能，尤其是在dom结构复杂的时候。
当然，我们也可以在这里添加自定义的判断条件：
```
shouldComponentUpdate(nextProps,nextState){
    console.group("2-组件更新判断");
    console.log(nextProps);
    console.log(nextState);
    console.groupEnd();
    return (nextProps.n + nextState.n <= 10);
}
```
    -   componentWillUpdate();componentWillUpdate，组件即将更新。当shouldComponentUpdate返回值为true时，在shouldComponentUpdate之后调用。
    -   render(),组件渲染。当组件状态发生更新时，render方法也会执行，渲染新的真实DOM。
    -   componentDidUpdate()，组件更新完毕。
这个钩子函数是更新期的结束，在这里，DOM元素已经被修改，如果需要DOM操作，则必须在这里执行。
-   销毁期:
    -   componentWillUnmount，组件即将卸载。
在这个钩子函数里，我们主要执行销毁组件的善后工作，例如清除一些事件监听和定时器。
